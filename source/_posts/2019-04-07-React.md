---
title: "ä»é›¶å¼€å§‹ç”¨webpack4æ­å»ºReacté¡¹ç›®"
date: 2019-04-07
# description: "æ–‡ç« æ‘˜è¦... ..."
categories: å‰ç«¯æ¡†æ¶ # åˆ†ç±»åªèƒ½æœ‰1ä¸ª
tags: # æ ‡ç­¾å¯ä»¥æœ‰å¤šä¸ª
- webpack
- React
cover: "passages/2019-04-07-React/cover.jpg" # æ–‡ç« å°é¢å›¾ç‰‡URL
---

ğŸ‘‡ å†…å®¹é€Ÿè§ˆ ğŸ‘‡

+ ä¸‹è½½npmå¹¶æ›¿æ¢é•œåƒæºï¼ˆcnpmï¼‰
+ åˆ›å»ºåŸºæœ¬çš„webpack4.xé¡¹ç›®
+ å®‰è£…webpackå¸¸ç”¨æ’ä»¶
+ React

<!-- more -->

# ä¸‹è½½npmå¹¶æ›¿æ¢é•œåƒæºï¼ˆcnpmï¼‰

---

### 1. å®˜ç½‘ä¸‹è½½é•¿æœŸæ”¯æŒç‰ˆNode.js

[Node.jså®˜ç½‘](https://nodejs.org/zh-cn/)

![Node.jså®˜ç½‘](Node.jså®˜ç½‘.jpg)

ä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€å®‰è£…ç¨‹åºï¼Œæ ¹æ®é»˜è®¤è®¾ç½®ä¸€ç›´ä¸‹ä¸€æ­¥å³å¯
å®‰è£…å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥`npm -v`æŸ¥çœ‹å½“å‰npmç‰ˆæœ¬

```shell
$ npm -v
```

å¦‚å›¾å³ä¸ºå®‰è£…æˆåŠŸï¼š

![æŸ¥çœ‹npmç‰ˆæœ¬](æŸ¥çœ‹npmç‰ˆæœ¬.jpg)

### 2. ä½¿ç”¨æ·˜å®é•œåƒæºcnpmä»£æ›¿npm

+ ç”±äºå¤§å¤šæ•°æ¨¡å—çš„å®‰è£…åŒ…é•œåƒåœ¨å›½å¤–ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é•œåƒæºæ›¿æ¢æˆå›½å†…ä»¥æå‡ä¸‹è½½é€Ÿåº¦
+ npmå®‰è£…æ¨¡å—å‘½ä»¤æ ¼å¼ï¼š`npm install [å®‰è£…æ¨¡å¼] [æ¨¡å—å] --é™„åŠ å‚æ•°å=é™„åŠ å‚æ•°çš„å€¼`

```
$ npm install -g cnpm --registry=https://registry.npm.taobao.org
```

ä¸Šè¿°å‘½ä»¤è¡¨ç¤ºï¼šä»¥`å…¨å±€æ¨¡å¼`å®‰è£…`cnpm`æ¨¡å—ï¼Œé™„å¸¦å‚æ•°`registry`ï¼Œå…¶å€¼ä¸º`https://registry.npm.taobao.org`

åŒç†ï¼ŒæŸ¥çœ‹å½“å‰cnpmç‰ˆæœ¬å·

```
$ cnpm -v
```

å¦‚å›¾å³ä¸ºå®‰è£…æˆåŠŸï¼š

![æŸ¥çœ‹cnpmç‰ˆæœ¬](æŸ¥çœ‹cnpmç‰ˆæœ¬.jpg)

# åˆ›å»ºåŸºæœ¬çš„webpack4é¡¹ç›®

---

### 1. åˆå§‹åŒ–åŒ…ç®¡ç†æ–‡ä»¶package.json

é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆåå­—ä»»æ„ï¼‰

![åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®æ–‡ä»¶å¤¹](åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®æ–‡ä»¶å¤¹.jpg)

å¤åˆ¶è¯¥æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥`cd è·¯å¾„`è¿›å…¥åˆ°æ–‡ä»¶å¤¹åº•ä¸‹

![cdå‘½ä»¤è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹](cdå‘½ä»¤è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹.jpg)

> é€šå¸¸ï¼Œè¯¥è·¯å¾„è¢«ç§°ä½œ`é¡¹ç›®æ ¹ç›®å½•`

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œé€šè¿‡å‘½ä»¤`npm init -y`åˆ›å»ºåŒ…ç®¡ç†æ–‡ä»¶`package.json`ï¼š

```
$ npm init -y
```

ç»“æœå¦‚ä¸‹ï¼š

![åˆ›å»ºåŒ…ç®¡ç†æ–‡ä»¶package.json](åˆ›å»ºåŒ…ç®¡ç†æ–‡ä»¶package.json.jpg)

### 2. æ„å»ºç›®å½•ç»“æ„

+ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`src`æºä»£ç ç›®å½•å’Œ`dist`äº§å“ç›®å½•
+ åœ¨`src`æ–‡ä»¶å¤¹ä¸‹åˆ›å»º`index.html`å’Œ`index.js`

ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

![åˆå§‹åŒ–ç›®å½•ç»“æ„](åˆå§‹åŒ–ç›®å½•ç»“æ„.jpg)

index.htmlï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>webpack-react</title>
</head>
<body>
    <h1>è¿™æ˜¯é¦–é¡µ</h1>
</body>
</html>
```

### 3. ä½¿ç”¨cnpmå…¨å±€å®‰è£…webpack4

å‘½ä»¤è¡Œè¾“å…¥ï¼š
```
cnpm install webpack webpack-cli -g
```

ç»“æœå¦‚ä¸‹ï¼š

![ä½¿ç”¨cnpmå…¨å±€å®‰è£…webpack4](ä½¿ç”¨cnpmå…¨å±€å®‰è£…webpack4.png)

### 4. å®‰è£…webpack4ä¾èµ–

å‘½ä»¤è¡Œè¾“å…¥ï¼š
```
cnpm install webpack webpack-cli -D
```

+ æ³¨æ„ï¼šwebpack4ä»¥ä¸Šçš„ç‰ˆæœ¬éœ€è¦å®‰è£…`webpack`å’Œ`webpack-cli`ä¸¤ä¸ªä¾èµ–åŒ…
+ `-D`è¡¨ç¤ºå°†ä¾èµ–ä¿¡æ¯ï¼ˆåŒ…åç§°ä»¥åŠç‰ˆæœ¬å·ï¼‰å†™å…¥åˆ°`package.json`æ–‡ä»¶çš„`devDependencies`å­—æ®µ

ç»“æœå¦‚ä¸‹ï¼š

![å®‰è£…webpack4çš„ä¸¤ä¸ªä¾èµ–åŒ…](å®‰è£…webpack4çš„ä¸¤ä¸ªä¾èµ–åŒ….jpg)

package.jsonï¼š

![package.jsonçš„dependenceså­—æ®µ](package.jsonçš„dependenceså­—æ®µ.jpg)

### 5. ä½¿ç”¨webpackå‘½ä»¤æ‰“åŒ…é¡¹ç›®

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`webpack.config.js`æ–‡ä»¶ï¼š

![åˆ›å»ºwebpack.config.jsæ–‡ä»¶](åˆ›å»ºwebpack.config.jsæ–‡ä»¶.jpg)

`webpack.config.js`å†…å®¹å¦‚ä¸‹ï¼š

```javascript
module.exports = {
    mode: 'development'
}
```

å‘½ä»¤è¡Œè¾“å…¥`webpack`å¹¶å›è½¦ï¼š

```
$ webpack
```

å¦‚å›¾å³ä¸ºæ‰“åŒ…æˆåŠŸï¼š

![ä½¿ç”¨webpackå‘½ä»¤æ‰“åŒ…é¡¹ç›®](ä½¿ç”¨webpackå‘½ä»¤æ‰“åŒ…é¡¹ç›®.jpg)

æœ€åçš„é¡¹ç›®ç›®å½•ç»“æ„ï¼š

```
é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€â”€package.json
â”œâ”€â”€â”€webpack.config.js
â”œâ”€â”€â”€node_modules
â”‚   â””â•Œâ•Œ ä¸‹é¢æ˜¯æ‰€æœ‰npmä¾èµ–åŒ…
â”œâ”€â”€â”€dist
â”‚   â””â•Œâ•Œâ•Œâ•Œâ•Œ main.js      // webpackæ‰“åŒ…å…¥å£æ–‡ä»¶
â”œâ”€â”€â”€src
â”‚   â”œâ•Œâ•Œâ•Œâ•Œâ•Œ index.js     // é¦–é¡µå¼•ç”¨çš„jsæ–‡ä»¶
â”‚   â””â•Œâ•Œâ•Œâ•Œâ•Œ index.html   // é¦–é¡µ
```

# å®‰è£…webpackå¸¸ç”¨æ’ä»¶

---

### 1. webpack-dev-server

+ ä½¿ç”¨`webpack-dev-server`æ’ä»¶æ­å»ºæœ¬åœ°è™šæ‹ŸæœåŠ¡å™¨
+ å¯¹é¡¹ç›®ä¸­çš„ä»»æ„æ–‡ä»¶`ä¿®æ”¹å¹¶ä¿å­˜`åï¼Œä¼šè‡ªåŠ¨é‡ç¼–è¯‘å¹¶**åˆ·æ–°æµè§ˆå™¨ä¸­çš„å†…å®¹**

å‘½ä»¤è¡Œè¾“å…¥ï¼š

```
$ cnpm install webpack-dev-server -D
```

ç»“æœå¦‚ä¸‹ï¼š

![å®‰è£…webpack-dev-serveræ’ä»¶](å®‰è£…webpack-dev-serveræ’ä»¶.jpg)

ä¿®æ”¹`package.json`çš„`scripts`å­—æ®µï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```javascript
"scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "webpack-dev-server" // åŠ å…¥è¿™ä¸€è¡Œ
},
```

å‘½ä»¤è¡Œæ‰§è¡Œ`npm run dev`ï¼š

```
$ npm run dev
```

çœ‹åˆ°å‘½ä»¤è¡Œè¾“å‡º`Compiled successfully`å³ä¸ºæˆåŠŸï¼š

![æ‰§è¡Œdevè„šæœ¬](æ‰§è¡Œdevè„šæœ¬.jpg)

åœ¨æµè§ˆå™¨è¾“å…¥`localhost:8080`ä¼šçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š

![æµè§ˆå™¨æ‰“å¼€8080ç«¯å£](æµè§ˆå™¨æ‰“å¼€8080ç«¯å£.jpg)

æµ‹è¯•ä¸€ä¸‹æ’ä»¶
é¦–å…ˆï¼Œä¿®æ”¹`index.js`ï¼Œéšä¾¿åŠ å…¥ä¸€è¡Œä»£ç 

```javascript
alert('hello, world')
```

ä¿®æ”¹`index.html`çš„headå¤´éƒ¨ï¼Œå¼•å…¥`main.js`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>webpack-react</title>
    <!-- æ³¨æ„ï¼Œè·¯å¾„æ˜¯"/main.js"ï¼Œè€Œä¸æ˜¯"../dist/main.js" -->
    <script src="/main.js"></script>    <!-- åŠ å…¥è¿™ä¸€è¡Œ -->
</head>
<body>
    <h1>è¿™æ˜¯é¦–é¡µ</h1>
</body>
</html>
```

æ­¤æ—¶ï¼Œæµè§ˆå™¨è®¿é—®`localhost:8080/src/`ï¼Œè¯¥è·¯å¾„å°†è‡ªåŠ¨å®šä½åˆ°`src`ç›®å½•ä¸‹çš„`index.html`æ–‡ä»¶

![æµ‹è¯•dev-serveræ’ä»¶](æµ‹è¯•dev-serveræ’ä»¶.jpg)

> ä¿®æ”¹`index.js`é‡Œçš„ä»£ç ï¼Œæµè§ˆå™¨é‡Œçš„å†…å®¹ä¹Ÿä¼šå®æ—¶æ›´æ–°å“¦

### 2. html-webpack-plugin

### 3. dsadsa